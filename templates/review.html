{% extends "base.html" %}
{% block content %}

<div class="container" style="max-width:1100px; padding-top:30px;">

    <!-- TITLE -->
    <h2 style="font-weight:700; margin-bottom:5px;">
        Attempt Review – {{ attempt.test.title }}
    </h2>

    <p style="font-size:16px; color:#333; margin-bottom:15px;">
        {{ attempt.test.description }}
    </p>

    <!-- SCORE -->
    <p style="font-size:18px; font-weight:600; margin-bottom:25px;">
        Score: {{ attempt.score }} / {{ attempt.total }}
    </p>

    <!-- TABLE HEADER -->
    <div style="
        display:grid;
        grid-template-columns: 70px 1.6fr 1fr 1fr 120px;
        font-weight:600;
        margin-bottom:10px;
        color:#333;
    ">
        <div>Q No</div>
        <div>Question</div>
        <div>Your Answer</div>
        <div>Correct Answer</div>
        <div>Result</div>
    </div>

    <!-- QUESTIONS -->
    {% for r in rows %}

    <div style="
        background: rgba(255,255,255,0.34);
        padding:20px;
        border-radius:12px;
        margin-bottom:20px;
    ">

        <!-- ROW WITH QNO VISIBLE -->
        <div style="
            display:grid;
            grid-template-columns: 70px 1.6fr 1fr 1fr 120px;
            align-items:center;
            margin-bottom:8px;
        ">

            <!-- Q NO -->
            <div style="font-weight:700; font-size:17px;">
                {{ r.qno }}
            </div>

            <!-- QUESTION -->
            <div>
                {{ r.question }}
            </div>

            <!-- USER'S ANSWER -->
            <div style="font-weight:600;">
            {% if r.selected is not none %}
                ({{ ['a','b','c','d','e'][r.selected] }})
                {{ r.options[r.selected] }}
            {% else %}
                —
            {% endif %}
            </div>

            <!-- CORRECT ANSWER -->
            <div style="font-weight:600;">
            {{ r.correct }}

            </div>

            <!-- RESULT -->
            <div>
                {% if r.is_correct %}
                    <span style="color:green; font-weight:700;">✔ Correct</span>
                {% else %}
                    <span style="color:red; font-weight:700;">✘ Wrong</span>
                {% endif %}
            </div>

        </div>

        <!-- EXPLANATION BOX -->
        <div style="
            margin-top:8px;
            background: rgba(255,255,255,0.55);
            padding:12px 16px;
            border-left:6px solid #555;
            border-radius:10px;
            font-size:15px;
            color:#333;
        ">
            <strong>Explanation:</strong> {{ r.explanation }}
        </div>

    </div>

    {% endfor %}

</div>

{% endblock %}
