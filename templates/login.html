
<div class="main-content-wrapper auth-container">

    <form id="loginForm" method="post" action="/login" class="glass-form auth-form">

        <h1>Login</h1>

        <!-- LOGIN METHOD -->
        <div class="form-group">
    <label>Login using:</label>

    <div class="login-methods">
        <label>
            <input type="radio" name="login_method" value="email" checked>
            Email
        </label>

        <label>
  <input type="radio" name="login_method" value="phone">
  Phone Number
</label>
<div id="phoneError" class="flash error" style="display:none;"></div>

    </div>
</div>



        <!-- EMAIL / PHONE INPUT -->
        <div class="form-group">
            <label id="login-label">Email Address:</label>
            <input
                type="email"
                id="login_identifier"
                name="login_identifier"
                autocomplete="username"
                required
                placeholder="Enter your email"
            >
        </div>

        <!-- PASSWORD -->
        <!-- PASSWORD -->
<div class="form-group">
    <label>Password:</label>
    <input
        type="password"
        id="password"
        name="password"
        autocomplete="current-password"
        required
        placeholder="Enter your password"
    >

</div>


        <button type="submit">Login</button>

        <div class="divider">OR</div>

<a href="/login/google" class="oauth-button google">
  Continue with Google
</a>

        <p class="auth-switch">
            Don't have an account?
            <a href="{{ url_for('register') }}">Register here</a>
        </p>

    </form>
</div>

<script>
function showError(msg) {
  let err = document.getElementById("formError");
  if (!err) {
    err = document.createElement("div");
    err.id = "formError";
    err.className = "flash error";
    err.style.marginTop = "10px";
    document.querySelector(".auth-form").prepend(err);
  }
  err.innerText = msg;
}
</script>
<script>
(function () {
  const form = document.getElementById("loginForm");
  if (!form) return;

  form.addEventListener("submit", async function (e) {
    e.preventDefault();

    const formData = new FormData(form);

    const res = await fetch("/login", {
      method: "POST",
      headers: {
        "X-Requested-With": "XMLHttpRequest"
      },
      body: formData,
      credentials: "same-origin"
    });

    const data = await res.json();

    if (data.success) {
      // ðŸ”¥ FORCE redirect to home
      window.location.href = "/";
    } else {
      alert(data.error || "Login failed");
    }
  });
})();
</script>



