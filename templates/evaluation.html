{% extends "base.html" %}
{% block content %}
<div class="container" style="max-width:900px;">
  <h3>Evaluation - {{ attempt.exam.title }}</h3>
  <div style="margin-top:20px; background:rgba(255,255,255,0.06); padding:18px; border-radius:10px;">
    <h4>Question {{ q_no }}</h4>
    <p style="font-weight:600">{{ question.question }}</p>

    <p><strong>My answer:</strong> {{ your_answer or 'No answer' }}</p>

    <p><strong>Correct answer:</strong> {{ question.correct_answer }}</p>

    {% if is_correct %}
      <p style="color:green; font-weight:700">✅ Correct</p>
    {% else %}
      <p style="color:red; font-weight:700">❌ Wrong</p>
    {% endif %}

    <hr>
    <h5>Explanation</h5>
    <p>{{ question.explanation or 'No explanation provided.' }}</p>
  </div>

  <div style="margin-top:18px;">
    {% set next_q = q_no + 1 %}
    {% if next_q <= (question.__class__.query.filter_by(exam_id=attempt.exam_id).count()) %}
        <a class="hero-btn primary" href="{{ url_for('review_question', attempt_id=attempt.id, q_no=next_q) }}">Next</a>
    {% endif %}
    <a class="hero-btn secondary" href="{{ url_for('review_attempt', attempt_id=attempt.id) }}">Back to Table</a>
  </div>
</div>
{% endblock %}
